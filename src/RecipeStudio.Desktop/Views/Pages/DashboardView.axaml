<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="RecipeStudio.Desktop.Views.Pages.DashboardView">

  <Grid RowDefinitions="Auto,*" Margin="18">

    <Grid ColumnDefinitions="*,Auto,Auto" Margin="0,0,0,14">
      <StackPanel>
        <TextBlock Text="Дашборд" Classes="h1" />
        <TextBlock Text="Рецепты в базе данных (SQLite)" Classes="muted" />
      </StackPanel>

      <Button Grid.Column="1" Command="{Binding RefreshCommand}" Classes="ghost" Margin="0,0,10,0">Обновить</Button>
      <Button Grid.Column="2" Command="{Binding NewRecipeCommand}" Classes="accent">+ Новый рецепт</Button>
    </Grid>

    <ScrollViewer Grid.Row="1">
      <ItemsControl x:Name="RecipeCards" ItemsSource="{Binding Recipes}">

        <!-- WrapPanel in Avalonia does not expose WPF-like Spacing; emulate spacing via item container margin -->
        <ItemsControl.Styles>
          <Style Selector="#RecipeCards > ContentPresenter">
            <Setter Property="Margin" Value="0,0,12,12" />
          </Style>
        </ItemsControl.Styles>
        <ItemsControl.ItemsPanel>
          <ItemsPanelTemplate>
            <WrapPanel />
          </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>

        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <Border Classes="card" Width="320">
              <DockPanel LastChildFill="True">

                <StackPanel DockPanel.Dock="Top" Spacing="6">
                  <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="SemiBold" />
                  <TextBlock Text="{Binding LastModified}" Classes="muted" />
                  <TextBlock Text="{Binding PointCount, StringFormat='Точек: {0}'}" Classes="muted" />
                </StackPanel>

                <Border Margin="0,12,0,10" Height="120" CornerRadius="8" BorderBrush="#2B3B59" BorderThickness="1" Background="#0B1220">
                  <TextBlock Text="preview" HorizontalAlignment="Center" VerticalAlignment="Center" Classes="muted" />
                </Border>

                <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
                  <Button Command="{Binding DeleteCommand}" Classes="danger">Удалить</Button>
                  <Button Command="{Binding OpenCommand}" Classes="accent">Открыть</Button>
                </StackPanel>

              </DockPanel>
            </Border>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
    </ScrollViewer>
  </Grid>
</UserControl>
