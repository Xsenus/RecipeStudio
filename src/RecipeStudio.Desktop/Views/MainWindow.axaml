<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:RecipeStudio.Desktop.ViewModels"
        xmlns:pages="clr-namespace:RecipeStudio.Desktop.Views.Pages"
        x:Class="RecipeStudio.Desktop.Views.MainWindow"
        Width="1280" Height="800"
        MinWidth="1100" MinHeight="700"
        SystemDecorations="None"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        Title="Recipe Studio"
        WindowStartupLocation="CenterScreen"
        Closing="OnWindowClosing">

  <Window.DataTemplates>
    <DataTemplate DataType="vm:DashboardViewModel">
      <pages:DashboardView />
    </DataTemplate>
    <DataTemplate DataType="vm:EditorViewModel">
      <pages:EditorView />
    </DataTemplate>
    <DataTemplate DataType="vm:SimulationViewModel">
      <pages:SimulationView />
    </DataTemplate>
    <DataTemplate DataType="vm:SettingsViewModel">
      <pages:SettingsView />
    </DataTemplate>
  </Window.DataTemplates>

  <Grid RowDefinitions="Auto,Auto,*">
    <Border Grid.Row="0" Classes="titlebar" PointerPressed="TitleBar_PointerPressed">
      <Grid ColumnDefinitions="Auto,*,Auto" Margin="10,4,10,4">
        <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
          <Border Width="14" Height="14" Background="#2E5C93" CornerRadius="2" />
          <TextBlock Text="Recipe Studio" FontSize="12" />
        </StackPanel>

        <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="2" VerticalAlignment="Center">
          <Button Classes="window-btn" Click="Minimize_Click">—</Button>
          <Button Classes="window-btn" Click="Maximize_Click">▢</Button>
          <Button Classes="window-btn close" Click="Close_Click">✕</Button>
        </StackPanel>
      </Grid>
    </Border>

    <Border Grid.Row="1" Classes="topbar" Padding="14,8">
      <Grid ColumnDefinitions="*,Auto,Auto">
        <ScrollViewer Grid.Column="1" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Disabled" HorizontalAlignment="Right">
          <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
            <Button Command="{Binding NavigateDashboardCommand}" Classes="nav" Classes.nav-active="{Binding IsDashboardActive}">ДАШБОРД</Button>
            <Button Command="{Binding NavigateEditorCommand}" Classes="nav" Classes.nav-active="{Binding IsEditorActive}" IsVisible="{Binding CanAccessRecipePages}">РЕДАКТОР</Button>
            <Button Command="{Binding NavigateSimulationCommand}" Classes="nav" Classes.nav-active="{Binding IsSimulationActive}" IsVisible="{Binding CanAccessRecipePages}">СИМУЛЯЦИЯ</Button>
            <Button Command="{Binding NavigateSettingsCommand}" Classes="nav" Classes.nav-active="{Binding IsSettingsActive}">НАСТРОЙКИ</Button>
          </StackPanel>
        </ScrollViewer>

        <Border Grid.Column="2" Classes="status-pill" VerticalAlignment="Center" Margin="12,0,0,0">
          <Ellipse Width="8" Height="8" Fill="#22C55E" VerticalAlignment="Center" />
        </Border>
      </Grid>
    </Border>

    <ContentControl Grid.Row="2" Content="{Binding CurrentPage}" />
  </Grid>
</Window>
